---
title: “如何生成数据模型或数据字典”
description: 描述
solution: Campaign
product: Campaign
applies-to: "Campaign Classic"
keywords: "KCS， Classic， ACC， Data Model， Data Dictionary"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Roxann McGlumphy
article-created-date: "11/29/2022 12:18:24 AM"
article-published-by: Amol Mahajan
article-published-date: "2/17/2023 9:31:17 AM"
version-number: 4
article-number: KA-17519
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=d691fa51-7b6f-ed11-9561-6045bd006079"
source-git-commit: 49f0a8228f75b9db1cfbc66435a9202194a2cad1
workflow-type: tm+mt
source-wordcount: '632'
ht-degree: 0%

---

# 如何生成数据模型或数据字典

## 描述 {#description}

<b>环境</b><br><br>Campaign Classicv7<br><br> <br><br><br><b>问题/症状</b>
本文档介绍了两种生成Adobe Campaign数据库数据模型或数据字典的方法。


## 解决方法 {#resolution}


Adobe Campaign包含数百个表。 本文档介绍了两种生成架构文档的不同方法：

通过生成Open Office文档(可在Microsoft Word中读取)，或通过生成HTML网页。
<br>方法1:创建OpenOffice文档<br> 
在Adobe Campaign *datakit\nms\fra\package\optional* 目录中，有一个名为 <b>dbbBuilder.xml</b>. 此包文件包含一个JavaScript实体，该实体生成一个Open Office文档，用于详细说明Adobe Campaign实例的数据库模式。
<br> 
<b>创建JavaScript文件</b>
<br> 
使用Campaign控制台资源管理器视图，在管理配置JavaScript代码中编写一个简单的JavaScript实用程序，如以下示例中所示。

更改strOutputFile值以添加要在其中创建Open Office文档的目标目录。 例如：/tmp/database-description.odt。
<br> 
*文件示例：cus:build-dbd.js*


```
/* * build-dbd.js/ var 
    strXslt = "nl:dbdToOdt.xsl" 
    var strTemplate = installDirectory( "datakit/nl/dbd-template.odt" ) 
    var strOutputFile = "database-description.odt" 
    var sql = xtk.sqlSchema.create() sql.Generate() 
    var strDbXml = db = sql.toXML().toXMLString() 
    var strOdt = applyXsl(strXslt, strDbXml) 
    strOdt = strOdt.replace(/\?xml .*\?\r?\n/, '\r\n' ) 
    var mbContent = new MemoryBuffer mbContent.fromString(strOdt, "utf-8" ) 
    var zip = new ZipFile(strTemplate) 
    zip.open() zip.setEntry( "content.xml" , mbContent) zip.save(strOutputFile)
```

<br> <br> 
<b>导入dbdBuilder.xml</b>
<br> 
可通过在存储包的目录中执行以下命令来导入dbdBuilder.xml包。 将instance_name替换为Adobe Campaign实例的实际名称。

`nlserver package - import :dbdBuilder.xml -instance:instance_name`
<br><br> 
*Debian的包导入示例*


```
neolane@debian: /nl6/datakit/nms/fra/package/optional $ cd 
    /nl6/datakit/nms/fra/package/optionalneolane@debian:/nl6/datakit/nms/fra/package/optional$ 
    nlserverpackage -import:dbdBuilder.xml 
    -instance:10:46:09 
    Application serverfor Adobe Campaign Version 6.1.1(build 8537) of 04/16/201410:46:09 
    Starting 1 connection(s) on pool'default vmcloud'(PostgreSQL, server='localhost', 
    login='user:password')10:46:09 Importing package'/tmp/dbdBuilder.xml'...10:46:11 
    Enumerating thefile entities...10:46:11 
    Writing entitiesin the database...10:46:11 
    Saving entities oftype 'xtk:xslt'...10:46:12 
    Saving entities oftype 'xtk:javascript'...10:46:12 
    Installation of packages successful.
```


Windows的包导入示例


```
C: cd "\Program Files (x86)\Adobe\Adobe Campaign v6\bin" 
    C:\Program Files (x86)\Adobe\Adobe Campaign v6\binnlserver.exe 
    package - import : ..\datakit\nms\fra\package\optional\dbdBuilder.xml 
    -instance: 13:52:57 Application server for Adobe Campaign Version 6.1.1 (build 8622) of 01 /19/2015 13:52:57 
    Starting 1 connection(s) on pool 'default ' (PostgreSQL, server= 'localhost' , login= 'user:password' ) 13:52:57
    Importing package 'C:\Program Files (x86)\Adobe\Adobe Campaign v6\bin\..\datakit\nms\fra\package\optional\dbdBuilder.xml'... 
    13:52:59 Enumerating the file entities... 
    13:52:59 Writing entities in the database... 
    13:52:59 Saving entities of type 'xtk:javascript' ... 
    13:52:59 Installation of packages successful.
```

<br> 
<b>生成数据库说明</b>
<br> 
要生成数据库描述，您可以使用命令行通过nlserver模块执行cus:build-dbd.js JavaScript实体，如下所示：


```
neolane@debian: /tmp $ nlserver javascript -instance: cus:build-dbd.js 05:06:12 
    Application server for Adobe Campaign Version 6.1.1 (build 8537) of 04 /16/2014 
    05:06:12 Starting 1 connection(s) on pool 
    'default vmcloud' (PostgreSQL, server= 'localhost' , login= 'user:vmcloud' ) 
    05:06:12 Executing JavaScript from entity of identifier 'xs:build-dbd.js' ... 
    05:06:12 Generating the database structure... 
    05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 
    05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:13 Generating the ODT XML... 05:06:14 Saving the zip file ... 
    05:06:14 File saved as 'database-description.odt
```

<br> 
在build-dbd.js中指定的目录中生成名为“database-description.odt”的OpenOffice文档。 它包含Adobe Campaign表的描述。 本文档可以使用Microsoft Word或OpenOffice进行编辑，并可转换为PDF。
![数据库描述](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr%3acontent/main-pars/image/database-description.gif "数据库描述")数据模型文件示例<br> 
本文档显示数据库表索引、SQL字段和键，以及模式链接列表。
<br> 方法2:使用xsltproc创建网页<br> 
此替代方法基于Linux xsltproc命令行工具。 在此方案中，通过创建XML文档导出架构，然后使用XSLT文件将XML转换为HTML。 输出文件可在浏览器中查看。

对于此方法，您需要：

- 运行xsltproc的Linux或Macintosh环境，它是标准的Macintosh Mac OS X命令行实用程序。
- 附加的文件、 database.xsl和styles.xml（请参阅attachments.zip）。


注释：

有一个Windows等效函数msxsl.exe，该函数在该平台上可以正常工作，但尚未进行测试。 请参阅 [https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&amp;id=21714](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&amp;amp;id=21714) 以了解更多详细信息。



下载
[获取文件](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr:content/main-pars/download_123504941/attachments.zip "attachments.zip") <br>database.xsl和styles.xml<br> <br> <br> 
1. 将两个附加的文件database.xsl和styles.xml下载到Linux或Mac上的工作目录中。 在XSL顶部，您可以调整两个变量：xsl:variable name=&quot;unicode&quot;false/xsl:variablexsl:variable name=&quot;engine&quot;postgresql/xsl:variable引擎支持的值包括：postgresql、mssql和oracle。 将引擎变量设置为与营销实例数据库对应的值。
2. 从Campaign控制台中，转到管理配置包管理包定义，然后创建包含数据架构(xtk:schema)的package.xml文件。
3. 导出包，然后将文件复制到Linux或Mac工作目录。
4. 使用XSLT在工作目录中运行以下命令来处理package.xml文件： *xsltproc database.xsl package.xml database.html*.


生成的文档并不完美：

- 无法记录链接上的某些连接条件。
- 当枚举在某个架构中引用，但在另一个未在该包中的架构中定义时，不会记录该枚举。

