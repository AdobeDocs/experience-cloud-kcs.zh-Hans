---
title: 数据存储垃圾收集任务失败，并出现错误
description: 描述
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Sunali Paul
article-created-date: 8/3/2022 10:43:31 AM
article-published-by: Sunali Paul
article-published-date: 8/5/2022 7:27:13 AM
version-number: 1
article-number: KA-20258
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=9174741c-1913-ed11-b83d-0022480867fb
exl-id: 841377b0-1f7c-4026-9de9-838bf88c0aa0
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '316'
ht-degree: 0%

---

# 数据存储垃圾收集任务失败，并出现错误

## 描述


DataStoreGarbageCollectionTask失败，出现以下错误

\*错误\* sling-oak-oobservation-19 org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector并非所有存储库都具有可用的标记引用：e0fb2a15-d5d5-4013-9607-0fb89cf87c94 26.07.2022 20:56:50.737 \*ERROR\* sling-oak-oobservation-19 org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector Blob垃圾收集错误java.io.IOException:并非所有存储库都在org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector$GarbageCollectionType$1.mergeAllMarkedReferences(MarkSweepGarbageCollector.java:7 22)org.apache.ackrabbit.oak-blob-plugins:1.8.21 at org.apache.jackrabb.ok.sweepSweepGrbCollector.(MarkPluginsGab.javab.grab.p.g.g.gab.grabb.gr.g.grab.p.grab.p.gab.p.grab.p.grabb.g.gab.grab.garb.g.ple.g.g.grab.goak-blob-plugins:1.8.21，位于org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector.markAndSweep(MarkSweepGarbageCollector.java:284)org.apache.jackrabbit.oak-blob-plugins:1.8.21,at org.ackrb.bleSwepGrabepG垃圾收集器(MarkGrababababab.javeGrb(GGGrbageGGrbageGab.rb.arbageSweGab(RbageGrb)插件：1.8.21 at org.apache.jackrabbit.oak.plugins.blob.BlobGC$1.call(BlobGC.java:87)org.apache.jackrabbit.oak-blob-plugins:1.8.21 at org.apache.jackrabbit.plugins.blobGC$1.call(BlobGC.java:83)。apache.jakrabb-b:1.8.21at.jat.java.blob.plutil.bulut.futureTuteryTutery TaTuteTTask.FuteryTTask（未来运行任务：266）在java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)的java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)的java.lang.Thread.run(Thread.java:748)26.07.2022 20:56:51.620 \*ERROR\* pool-20-thread-1 org.apache.jackrabbit.oak.commons.jmx.ManagementOperation Blob垃圾收集失败java.io.IOException:并非所有存储库都在org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector$GarbageCollectionType$1.mergeAllMarkedReferences(MarkSweepGarbageCollector.java:7 22)org.apache.ackrabbit.oak-blob-plugins:1.8.21 at org.apache.jackrabb.ok.sweepSweepGrbCollector.(MarkPluginsGab.javab.grab.p.g.g.gab.grabb.gr.g.grab.p.grab.p.gab.p.grab.p.grabb.g.gab.grab.garb.g.ple.g.g.grab.goak-blob-plugins:1.8.21，位于org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector.markAndSweep(MarkSweepGarbageCollector.java:284)org.apache.jackrabbit.oak-blob-plugins:1.8.21,at org.ackrb.bleSwepGrabepG垃圾收集器(MarkGrababababab.javeGrb(GGGrbageGGrbageGab.rb.arbageSweGab(RbageGrb)插件：1.8.21 at org.apache.jackrabbit.oak.plugins.blob.BlobGC$1.call(BlobGC.java:87)org.apache.jackrabbit.oak-blob-plugins:1.8.21 at org.apache.jackrabbit.plugins.blobGC$1.call(BlobGC.java:83)。apache.jakrabb-b:1.8.21at.jat.java.blob.plutil.bulut.futureTuteryTutery TaTuteTTask.FuteryTTask（未来运行任务：266）在java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)的java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)的java.lang.Thread.run(Thread.java:748)26.07.2022 20:56:51.628 \*INFO\* pool-20-thread-1 com.adobe.granite.maintenance.impl.MaintenanceJobsManagerImpl Name=&#39;DataStoreGarbageCollectionTask&#39;, Status =&#39;ERROR&#39;, Result=&#39;Data store GC:操作失败Blob垃圾收集失败：并非所有存储库都标记了可用引用&#39;, Details=&#39;{&quot;created&quot; :1658858205603,&quot;started&quot;:1658858205603,&quot;finished&quot;:1658858211620,&quot;duration&quot;:6017}&#39;


## 分辨率


如果您以前有一个实例使用数据存储，但该实例已销毁，并且创建了一个新实例以使用数据存储，则可能会出现此问题。

在删除在数据存储中注册的存储库ID后，可以解决该问题。 然后，Blob存储GC应该成功完成。

分步指南：1)转到数据存储路径aem-install-folder/crx-quickstart/repository/datastore并搜索存储库ID <b>e0fb2a15-d5d5-4013-9607-0fb89cf87c94</b> (它应该与error.log中提到的相同 <b>错误</b>\* sling-oak-oobservation-19 org.apache.jackrabbit.oak.plugins.blob.MarkSweepGarbageCollector并非所有存储库都具有标记引用可用： <b>e0fb2a15-d5d5-4013-9607-0fb89cf87c94</b>)，您将有一个具有此名称的引用文件，只需删除该引用文件（如果有多个文件，请重复这些步骤）。

2)再次运行GC，检查它是否解决了问题。
