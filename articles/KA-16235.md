---
title: Campaign Classic- SHA256和SHA512函数返回错误的第2次哈希更新
description: 描述
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign
keywords: KCS - SHA256和SHA512函数返回错误的第2次哈希更新
resolution: Resolution
internal-notes: https://jira.corp.adobe.com/browse/NEO-26500, E-000202021, E-000148142
bug: true
article-created-by: Marta Zator
article-created-date: 5/9/2022 2:40:05 PM
article-published-by: Marta Zator
article-published-date: 5/9/2022 2:45:38 PM
version-number: 2
article-number: KA-16235
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=cac10be5-a5cf-ec11-a7b5-0022480a8e40
exl-id: d8803e40-5813-4fd4-921d-df10956e1e74
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '265'
ht-degree: 1%

---

# Campaign Classic- SHA256和SHA512函数返回错误的第2次哈希更新

## 描述


客户报告SHA256和SHA512函数返回错误的哈希。

他们在此处发现，某些用户也存在此问题。
https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-function-returns-wrong-hash/qaq-p/351035/comment-id/3882


## 分辨率


客户共享了一个他们找到的解决方案：

出现此问题的原因是，当DB使用unicode编码时，Adobe将字符串数据类型转换为nvarchar而不是varchar。
对于客户，数据库编码默认使用unicode来支持泰语语言。 这就是Adobe将字符串转换为nvarchar的原因。

对于函数SHA256和SHA512，它正常工作，但会为varchar和nvarchar返回不同的哈希值。

对于客户，可以将该字段（仅包含移动号码）更改为varchar并正确对其进行哈希处理。

Adobe社区文章：
[https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034](https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034)



此外，如果使用Sql Server，摘要函数将使用字符串的utf-16表示形式。 您将无法获得预期的摘要（通常使用ascii或ut-8字符计算）。

示例：“hello”将根据字符串的ascii/utf-8表示形式提供14cde7c9ad35de5a37fce2ac276742175028fd9f7cdf0dae01ff508b126429d9 as sha2-256，并提供18fe2820b38427a08a5b49fb4d71a7027799bfe0050d3050ca4d49aa以utf-16表示形式显示。
