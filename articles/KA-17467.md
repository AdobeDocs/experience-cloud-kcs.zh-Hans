---
title: 复制队列问题
description: 描述
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager 6.4,Experience Manager 6.5
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: 11/3/2022 11:50:25 AM
article-published-by: Amol Mahajan
article-published-date: 11/3/2022 11:58:11 AM
version-number: 3
article-number: KA-17467
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=1a7e0ab3-6d5b-ed11-9561-6045bd006d92
exl-id: a908b24d-9e7c-488b-946f-769708b8dd5b
source-git-commit: 4702b69f883128bf305ec64f012ef01903f3f582
workflow-type: tm+mt
source-wordcount: '379'
ht-degree: 3%

---

# 复制队列问题

## 描述 {#description}

<b>环境</b>
- Experience Manager 6.4
- Experience Manager 6.5


<b>问题/症状</b>

AEM内容复制似乎已被阻止。

编辑者可以创建内容，但激活的页面不会在CQ5发布实例中更新。


## 解决方法 {#resolution}

请确保每个复制代理均已启用并正确配置。<br> 
1. 转到复制代理列表(<b>/etc/replication/agents.author.html</b>)
2. 对于每个复制代理，执行以下操作：
   - 确保代理已启用。
   - 通过单击“测试连接”验证与发布实例的连接。 如果失败，请确保在TCP网络级别，托管AEM创作实例的服务器可以连接到发布实例的端口。
   - 通过“查看日志”链接打开复制日志，并检查上次复制尝试是否成功。
   - 请注意复制队列中的第一个有效负载路径。 然后，尝试清除复制队列的第一个元素。 然后，验证复制是否继续。 恢复后，再次激活队列中所述的第一个有效负荷。
   - 与CRX Content Explorer检查，并确保没有 <b>/bin/receive</b> 节点。 否则，请将其删除。
   - 与CRX Content Explorer检查，并确保没有 <b>/bin/replicate</b> 节点。 否则，请将其删除。

<br> 重新启动复制代理和相关包<br> 此时，我们可以考虑复制代理已正确配置。 如果日志在几分钟内未显示复制尝试，则尝试以下纠正操作来取消阻止队列，按此顺序检查每个步骤是否继续复制。


1. 禁用复制代理，然后重新启用它。
2. 在Felix控制台(http://host:port/system/console/bundles/com.day.cq.cq-replication)中重新启动复制捆绑包。
3. 重新启动Apache Sling事件支持包(http://host:port/system/console/bundles/org.apache.sling.event)。
4. 重新启动Apache Felix EventAdmin (http://host:port/system/console/bundles/org.apache.felix.eventadmin)。

<br> 通过删除相应的Sling作业强制队列清除<br> 
如果以上操作失败，那么手动清除队列可能是最后一个选项。

可以通过使用topic =replication agent name直接删除Sling作业来实现这一点。

最快的方法是使用CRXDE Lite(<b>http://host:port/crx/de/index.jsp</b>)，并删除节点：

<b>`/var/eventing/jobs/assigned/%INSTANCE-SLING-ID%/%REPLICATION-AGENT-FULL-ID%`</b>

因此，例如使用默认发布代理：

<b>`/var/eventing/jobs/assigned/e23dd09d-83f1-4735-a77c-394df479214c/com.day.cq.replication.job.publish`</b>

请注意，这被视为一种异常的解决措施， [联系AEM支持](https://helpx.adobe.com/cn/marketing-cloud/contact-support.html) 不管怎样，如果发生这种事的话。
