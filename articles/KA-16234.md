---
title: 无法针对DM投放输出文件名使用/查询
description: 描述
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign,Campaign Standard
keywords: KCS — 无法对DM投放输出文件名使用/查询
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: 11/2/2022 11:03:30 AM
article-published-by: Amol Mahajan
article-published-date: 11/2/2022 12:24:11 PM
version-number: 4
article-number: KA-16234
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=157529f9-9d5a-ed11-9561-6045bd006a22
exl-id: e45ff2b0-8e36-4fa2-8270-6a6ddaa0b7aa
source-git-commit: 4702b69f883128bf305ec64f012ef01903f3f582
workflow-type: tm+mt
source-wordcount: '303'
ht-degree: 2%

---

# 无法针对DM投放输出文件名使用/查询

## 描述

<b>环境</b>
- Campaign Classic
- Campaign
- Campaign Standard

<b>问题/症状</b>
其中一位客户报告了以下问题：

从mdata字段中，我们要提取outputFile名称 — 请参见attachment(mData_outputFile.png)以了解位置，该位置存储在outputFile=&quot; &quot;。 我们想知道改变这种状况的最佳方法 *XML数据* 键入要作为营销活动工作流中的扩充字段传递的字段。 这样，我们就可以将附加到促销历史记录表中，以存储所有输出文件名。

由于我们知道mdata是XML字段，而不是要对其查询的DB字段。 但有没有办法实现这一目标？


## 解决方法


我们可以通过两种方式尝试解决此问题：

1. 使用文件提取活动在中提取投放数据 *XML* 格式。 这将确保 `mdata` 也将提取。 之后，您可以使用加载文件活动或JavaScript (*JS代码)* 活动，以解析该文件并获取您的数据。
2. 使用 *JS代码* 活动和 `queryDef` 以获取 `mdata` 然后解析XML。 将数据存储在 <b>实例变量</b> ，然后在过渡中加载


客户有一个跟进查询，如下所示：

我们正在尝试使用 `queryDef` 反对 `mdata`，我们编写了它。 对于解析方法，推荐的方法是什么？

回答：

您的请求将如下所示：

*queryDef operation=&quot;select&quot; schema=&quot;nms：delivery&quot;*

*选择*

*节点expr=&quot;@id&quot;/*

*node expr=&quot;output/@fileName&quot; label=&quot;输出文件&quot;/*

*/select*

*sysFilter*

*condition expr=&quot;@isModel = 0&quot;/*

*/sysFilter*

*orderBy*

*节点expr=&quot;@lastModified&quot; sortDesc=&quot;true&quot;/*

*/orderBy*

*/queryDef*



而且它将会返回：

*deliver-collection*

*投放id=&quot;11878415&quot;*

*输出文件名=&quot;abc.txt&quot;*

*/output*

*/delivery*

*/delivery-collection*
