---
title: “自定义标记的智能培训失败”
description: 描述
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ruxandra Nitu
article-created-date: "9/5/2023 6:41:03 AM"
article-published-by: Ruxandra Nitu
article-published-date: "9/5/2023 7:16:59 AM"
version-number: 1
article-number: KA-22781
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=f4a6bd2a-b74b-ee11-be6e-6045bd006239"
source-git-commit: 5174cd32a27f06ce26a9e94c1cc550a3cd633361
workflow-type: tm+mt
source-wordcount: '567'
ht-degree: 1%

---

# 自定义标记的智能培训失败

## 描述 {#description}

.lf-progress { width： 100%； height： 4px； border-radius： 3px； cursor： pointer }<br>.lf-progress：focus { outline： none； border： none }<br>.lf-progress：：-moz-range-track { cursor： pointer； background： none； border： none； outline： none }<br>.lf-progress：：-webkit-slider-thumb {高度： 13px；宽度： 13px；边框： 0；边框半径： 50%；背景： rgba(15， 204， 206， 1)；光标：指针}<br>.lf-progress：：-moz-range-thumb {高度： 13px；宽度： 13px；边框： 0；边框半径： 50%；背景： rgba(15， 204， 206， 1)；光标：指针}<br>.lf-progress：：-ms-track { width： 100%； height： 3px； cursor： pointer； background： rgba(0， 0， 0， 0)； border-color： rgba(0， 0， 0)； color： rgba(0， 0， 0) }<br>.lf-progress：-ms-fill-lower {背景： rgba(204， 204， 1)；border-radius： 3px }<br>.lf-progress：：-ms-fill-upper {背景： rgba(204， 204， 1)；边框半径： 3px }<br>.lf-progress：：-ms-thumb {边框：0；高度：15px；宽度：15px；边框半径：50%；背景：rgba(15， 204， 206， 1)；光标：指针}<br>.lf-progress:focus:：-ms-fill-lower {背景： rgba(204， 204， 1) }<br>.lf-progress:focus:：-ms-fill-upper {背景： rgba(204， 204， 1) }<br>.lf-player-container ：focus { outline： 0 }<br>.lf-popover { position： relative }<br>.lf-popover-content { display： inline-block； position： absolute； opacity： 1； visible： visible； translate(0， -10px)； box-shadow： 0 2px 5px rgba(0， 0， 0， 0.26)； transition： all 0.3s cubic-bezier(0.75， -0.02， 0.2， 0.97) }<br>.lf-popover-content.hidden {不透明度： 0；可见性：隐藏；转换：转换(0， 0) }<br>.lf-player-btn-container { display： flex； align-items： center }<br>.lf-player-btn { cursor： pointer； width： 14px }<br>.lf-player-btn.active { }<br>.lf-popover { position： relative }<br>.lf-popover-content { display： inline-block； position： absolute； background-color： rgba(255， 255， 255， 1)； opacity： 1； translation： translate(0， -10px)； box-shadow： 0 2px 5px rgba(0， 0， 0， 0.26)； transition： all 0.3s cubic-bezier(0.75， -0.02， 0.97)； pading： 10px }<br>.lf-popover-content.hidden {不透明度： 0；可见性：隐藏；转换：转换(0， 0) }<br>.lf-arrow { position： absolute； z-index： -1； content： &quot;&quot;； bottom： -9px； border-style： solid； border-width： 10px 10px 0 }<br>.lf-left-align， .lf-left-align .lfarrow {左： 0；右：取消设置}<br>.lf-right-align， .lf-right-align .lf-arrow { right： 0； left： unset }<br>.lf-text-input {边框：1px solid rgba(204， 204， 1)；边框半径：5px；填充：3px；宽度：60px；边距：0 }<br>.lf-color-picker { display： flex； flex-direction： row； justify-content： space-between； height： 90px }<br>.lf-color-selectors { display： flex； flex-direction： column； justify-content： space-between }<br>.lf-color-component { display： flex； flex-direction： row； font-size： 12px； align-items： center； justify-content： center }<br>.lf-color-component strong {宽度： 40px }<br>.lf颜色组件输入`[` type=&quot;range&quot;`]`  { margin： 0 0 0 10px }<br>.lf颜色组件输入`[` type=&quot;number&quot;`]`  { width： 50px； margin： 0 0 0 10px }<br>.lf-color-preview { font-size： 12px； display： flex； flex-direction： column； align-items： center； justify-content： space-between； padding-left： 5px }<br>.lf-preview { height： 60px； width： 60px }<br>.lf-popover-snapshot { width： 150px }<br>.lf-popover-snapshot h5 { margin： 5px 0 10px； font-size： 0.75rem }<br>.lf-popover-snapshot a { display： block； text-decoration： none }<br>.lf-popover-snapshot a：before { content： &quot;⥼&quot;；右边距： 5px }<br>.lf-popover-snapshot .lf-note { display： block； margin-top： 10px； color： rgba(153， 153， 1) }<br>.lf-player-controls>div {右边距： 5px；左边距： 5px }<br>.lf-player-controls>div：first-child {左边距： 0 }<br>.lf-player-controls>div：last-child {右边距： 0 }.go4109123758 { z-index： 9999 }<br>.go4109123758>\* { pointer-events： auto }<br>
<b>环境：</b>

AEM as a Cloud Service

<b>问题描述：</b>

客户按照中的步骤操作 `[` 1`]`  在AEM中启用智能标记（智能内容服务），以创建AIO项目以及旧版云配置。

完成智能标记集成后，他们尝试为其自定义标记创建智能标记训练 —  `[` 2`]` . 但是，每次训练都失败并出现错误 `[` 3`]`  日志中存在。



`[` 1`]`  [https://experienceleague.adobe.com/docs/experience-manager-learn/assets/metadata/custom-smart-tags.html?lang=en](https://experienceleague.adobe.com/docs/experience-manager-learn/assets/metadata/custom-smart-tags.html?lang=en)

`[` 2`]`  [https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/assets/manage/smart-tags.html?lang=en#train-model](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/assets/manage/smart-tags.html?lang=en#train-model)

`[` 3`]`


```
ERROR[ sling-threadpool-39aa0b87-e4ff-4521-b2c7-fce7134e4e4d-(apache-sling-job-thread-pool)-34-Granite Workflow External Process Polling Queue(com/adobe/granite/workflow/external/polling/event)]  com.day.cq.dam.similaritysearch.internal.workflow.process.DoTrainingProcess Error while checking for training status for jobId 64df73a9f768e24a117590e7
com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: Service returned an error: HTTP/1.1 403 Forbidden
at com.day.cq.dam.similaritysearch.internal.impl.SCSTrainingClientImpl.hasFinishedTraining(SCSTrainingClientImpl.java:203) [ com.day.cq.dam.cq-dam-similaritysearch:5.13.64] 
at com.day.cq.dam.similaritysearch.internal.workflow.process.DoTrainingProcess.hasFinished(DoTrainingProcess.java:95) [ com.day.cq.dam.cq-dam-similaritysearch:5.13.64] 
at com.day.cq.workflow.compatibility.CQWorkflowExtProcessProxy.hasFinished(CQWorkflowExtProcessProxy.java:82) [ com.day.cq.workflow.cq-workflow-impl:6.3.18] 
at com.adobe.granite.workflow.core.util.WEPProxyHolder.hasFinished(WEPProxyHolder.java:46) [ com.adobe.granite.workflow.core:2.1.100] 
at com.adobe.granite.workflow.core.job.ExternalProcessPollingHandler.process(ExternalProcessPollingHandler.java:119) [ com.adobe.granite.workflow.core:2.1.100] 
at org.apache.sling.event.impl.jobs.JobConsumerManager$JobConsumerWrapper.process(JobConsumerManager.java:502) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.startJob(JobQueueImpl.java:351) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.access$100(JobQueueImpl.java:60) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl$1.run(JobQueueImpl.java:287) [ org.apache.sling.event:4.3.8] 
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: Service returned an error: HTTP/1.1 403 Forbidden
```



## 解决方法 {#resolution}


客户在将AEM与智能内容集成时遵循的文档适用于AEM内部部署版本6.5。

对于AEMas a Cloud Service，无需手动配置集成（创建AIO项目和旧版云配置）。 对于AEMaaCS，它可开箱即用，无需手动添加任何云配置。

删除旧版云配置后，自定义标记的智能培训已成功完成。

<b>RCA：</b>

客户创建的旧版云配置干扰了OOTB集成，导致SimilaritySearchException并因此引发现场培训。

旧版云配置位于/etc/cloudconfigs下。 在生产环境中，无权访问crx/de以直接将其删除。 因此，在AEMaaCS中，对于生产环境，必须通过部署删除旧版云配置
