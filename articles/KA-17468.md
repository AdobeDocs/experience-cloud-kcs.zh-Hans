---
title: "禁用AEM Link Checker"
description: 描述
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager 6.4"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: "11/11/2022 11:42:17 AM"
article-published-by: Amol Mahajan
article-published-date: "1/25/2023 11:36:53 AM"
version-number: 6
article-number: KA-17468
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=727849e3-b561-ed11-9562-6045bd0067ea"
source-git-commit: 0596aeb0db927cabf08c268b403b40429a6d74e8
workflow-type: tm+mt
source-wordcount: '412'
ht-degree: 18%

---

# 禁用AEM Link Checker

## 描述 {#description}

<b>环境</b>
Experience Manager 6.4


<b>问题/症状</b>
如果链接检查器配置为在链接断开时不执行任何操作。 在这种情况下，如何禁用外部链接检查器来验证链接？ 在执行CPU分析和分析线程转储时，链接检查会影响性能，我们希望将其关闭。

<b>背景： </b> 每当在AEM中加载网站时，Link Checker都会自动检查所有内容页面中的嵌入链接，并将每个链接标记为“有效”或“无效”。

由于日志中有大量链接检查器警告，这可能会减慢实例或站点的速度。可以决定禁用某些链接检查。

注意：链接检查器不应在发布实例中启用。


## 解决方法 {#resolution}

如何禁用链接检查器或配置以在 AEM 中将链接标记为有效<br>
1. 禁用页面中的链接检查：
   - 添加 `x-cq-linkchecker="valid"` 参数 <b>标记</b> 以确保链接检查程序始终将链接标记为有效。


   - （可选）使用 `x-cq-linkchecker="skip"` 在 <b>标记</b> 链接检查程序甚至不会检查有效性。
2. 通过 <b>AEM Web Console</b>:
   - 访问AEM Web控制台配置1。


   - 搜索 <b>Day CQ Link Checker Transformer</b>.


   - 检查 <b>禁用检查</b> 框中，然后单击“保存”。
3. 禁用特定域的链接检查：
   - 访问AEM Web控制台配置1。


   - 搜索 <b>Day CQ Link Checker服务</b>.


   - 编辑 <b>链接检查覆盖模式</b> 参数。


<b>示例1</b>:system/

将不会检查任何以系统开头的外部链接。通过单击 + 向此部分添加其他覆盖模式。

<b>示例 2</b>:

这会将所有链接标记为有效的后续链接。

<b>建议</b>：删除/var/linkchecker下的所有节点，以阻止链接检查器重新检查URL。

{1}http://host:port/system/console/configMgr



注释：

如果您使用service.special_link_patterns，则Link Checker仍会检查URL，以查看其在字符和结构方面是否有效。


<br> 以编程方式禁用外部链接检查<br> 
在页面组件jsp中添加此代码会阻止通过调用完成外部链接检查 <b>LinkCheckerSettings.fromRequest(slingRequest)。setIgnoreExternals(true)</b>.  在大多数情况下，您只会在发布实例上实施它，而不是在创作实例上实施。  下面是一些要演示的代码：
<br> <br>

| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14 | `%``org.apache.sling.runmode.RunMode runmode = sling.getService(org.apache.sling.runmode.RunMode.``class``);``String runmodes = runmode.getCurrentRunModes();``boolean` `isPublish =``false``;``String  expectedRunModes = {``"publish"``};``if``(runmode.isActive(expectedRunModes)) {``isPublish =``true``;``}`<br> <br>`if``(isPublish) {``LinkCheckerSettings s = LinkCheckerSettings.fromRequest(slingRequest);``s.setIgnoreExternals(``true``);``}``%` |
| --- | --- |

<br> 
如果您只想禁用对特定组件或页面部分的链接检查，则可以再次通过以下代码重新启用它：
<br> <br>

| 1<br>2<br>3 | `%``s.setIgnoreExternals(``false``);``%` |
| --- | --- |

