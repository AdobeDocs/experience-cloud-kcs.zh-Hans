---
title: 跟踪工作流逻辑
description: 描述
solution: Campaign,Campaign Classic v7,Campaign v8
product: Campaign,Campaign Classic v7,Campaign v8
applies-to: Campaign Classic,Campaign,Campaign Classic v7,Campaign v8
keywords: KCS，跟踪工作流逻辑
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ananya Kuthiala
article-created-date: 5/10/2022 1:38:14 PM
article-published-by: Ananya Kuthiala
article-published-date: 5/10/2022 1:38:54 PM
version-number: 2
article-number: KA-17739
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=b1655370-66d0-ec11-a7b5-0022480a8e40
exl-id: fddd4869-ca73-4875-ae46-563272a7d172
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '382'
ht-degree: 0%

---

# 跟踪工作流逻辑

## 描述


跟踪工作流仅显示1个命令，但没有详细说明： <b>tracking -instance:%= instanceName % -download -update</b>



此知识库文章的目的是在后端列出工作流的步骤：

<b>步骤1</b>  — 在数据库中下载并插入跟踪日志(NmsTrackingLogXXX)。 在下载步骤中，工作流将不记录任何内容。

-download将仅从不同跟踪容器中获取跟踪日志并将其存储在数据库中。

<b>步骤2</b>  — 创建跟踪日志统计信息(NmsTrackingStats)。

-update将通过在NmsTrackingStats中创建聚合记录来整合日志。 系统会根据标记为更新的投放更新整个表。 所有跟踪报表都从此表中获取数据。 您可以通过单击“重新计算投放统计信息”，为每个缺少跟踪统计信息的投放手动执行此步骤。

<b>步骤3</b> 最终一个 — 为受打开或点击影响的所有投放重建投放统计信息(NmsDeliveryLogStats)（投放者逐一处理……）

跟踪工作流还将更新其他几个表：

NmsUserAgentReject NmsDelivery NmsUserAgent NmsTrackingLogRcp NmsTrackingStats

检查这些表中索引的碎片率很重要。 <u>如果索引碎片率高于30-35%，则需要重建索引。</u> 对于托管客户端，Adobe每月执行一次此维护操作。 如果不定期重建表的索引，则跟踪工作流的执行会减慢。

<b>要查看跟踪工作流执行的确切查询，请使用命令：</b>

*nlserver tracking -instance:instanceName -download -update -verbose -tracefilterr:\&lt;b>

此命令将在内部创建其他日志 </b>/var/instanceName/log/tracking.log <b>跟踪工作流执行期间执行的所有查询。

有时客户会问他们是否可以跳过更新流程？ 答案是否：跟踪统计信息不会更新，数据将无效，这可能会导致与跟踪有关的许多其他问题，我们希望通过任何必要的方式避免这些问题。

跟踪工作流执行完成后，选项 </b>NmsTracking_Pointer <b>更新。 选项值将以小数格式显示所有跟踪服务器容器中检索到的最后一个日志的日期和消息ID。 如果将此ID转换为十六进制值，则它将是存储在跟踪服务器上的跟踪文件的名称。


## 分辨率


本文介绍了工作流逻辑，以便它不需要解决。
