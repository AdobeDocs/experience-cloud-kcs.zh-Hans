---
title: "如何在AEM中克隆TarMK实例"
description: 描述
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: a59847e2e7e37f432cb01150b9444cd9dbf585df
workflow-type: tm+mt
source-wordcount: '186'
ht-degree: 2%

---

# 如何在AEM中克隆TarMK实例

## 描述

本文介绍如何正确克隆使用TarMK（或TarMK + FileDataStore）存储的AEM实例。

## 分辨率

以下步骤演示如何在上使用rsync复制AEM + TarMK + FileDataStore实例 [!DNL Linux] 安装AEM后 `/mnt/aem/author`.

1. 使用rsync之类的命令在运行时，将完整的AEM实例复制到其他服务器。 确保在复制过程中保留时间戳，并排除日志文件夹和数据存储。 例如：

   ```
   rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/
   ```

1. 停止AEM

1. 启动TarMK segmentstore文件夹的另一个副本，以获取自第一个副本完成以来的任何较新更改：

   ```
   rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/
   ```

1. 启动AEM。

1. 运行AEM时复制数据存储。 例如： `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`

1. 在目标服务器上，重新创建日志文件夹，删除 `crx-quickstart/repository/index` 文件夹，并从 `crx-quickstart/launchpad/felix` 文件夹。

   ```
   mkdir /mnt/aem/crx-quickstart/logs
   rm -rf /mnt/aem/crx-quickstart/repository/index
   find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print
   ```

1. 在目标服务器上，启动AEM并测试您的实例。

<b>重要说明：</b>

您必须确保在segmentstore文件夹之后复制数据存储，并且在复制期间保留所有时间戳。  Rsync允许使用 — a选项保留时间戳。
